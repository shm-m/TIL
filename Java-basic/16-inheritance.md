## 상속(Inheritance)

### 상속의 정의와 특징

**상속**이란 기존의 클래스를 **재사용** 하여 새로운 클래스를 작성하는 것.

상속은 **캡슐화, 추상화**와 더불어 객체 지향 프로그래밍의 중요한 특징임.

상속은 다음과 같은 특징을 지닌다.

- 적은 양의 코드로 새로운 클래스 작성
- 코드를 공통적으로 관리 가능

따라서 코드의 재사용성은 높이고 중복은 줄임으로써 **프로그램의 생산성을 높이고 용이한 유지보수를 가능케 함**

<br>

자바에서는 모든 클래스는 `java.lang.Object`를 상속받는다. 따라서 객체 생성 시 반드시 상속이 이루어지게 되어있음.

##### java.lang.Object

모든 클래스의 조상 클래스로, 기본적인 메소드들이 정의되어 있지만 우리 클래스에 맞는 형태가 아니다. 따라서 java.lang.Object가 상속해주는 메소드들을 자식 클래스들이 재정의해주어야 한다.

`java.lang.Object`에는 매우 기본적인 메소드인 `equals()`, 생성자, `toString()` 등의 메소드들이 구현되어 있고
자식 클래스는 그 메소드들을 그대로 받아서 사용이 가능하다. 따라서 기존의 클래스에 별다른 멤버로 추가하지 않아도 앞선 메소드들을 바로 사용할 수 있었음.

<br>

#### 상속의 구현

상속은 `extends`라는 키워드를 통해 작성. 새로 작성하고자 하는 클래스의 이름에 뒤에 `extends`와 상속받고자 하는 클래스의 이름을 넣으면 됨.

```java
class Child extends Parent {}
```

이때 상속받는 클래스를 **자식 클래스**, 상속해주는 클래스를 **부모 클래스**라고 함.

- **부모 클래스(Parent Class)** : 상위(super) 클래스, 기반(base) 클래스라고도 함
- **자식 클래스(Child Class)** : 하위(sub) 클래스, 파생된(derived) 클래스라고도 함

자식 클래스는 부모 클래스를 상속받기에 부모 클래스의 모든 멤버를 사용할 수 있다. 이는 자식 클래스에 별도로 작성하지 않아도 가능. 또한 부모 클래스에 새로운 멤버를 추가하면, 그 즉시 자식 클래스에서도 사용 가능하다.

> 자식 클래스의 인스턴스를 생성하면 부모클래스의 멤버 + 지식 클래스의 멤버가 합쳐진 인스턴스로 생성됨

또한, 자식 클래스의 자식 클래스 역시, 부모 클래스의 멤버를 사용 가능하다. 따라서 클래스간 상속관계를 맺어주면 자식의 자식까지 영향을 끼치기 때문에 공통적인 부분은 부모 클래스에서만 관리하면 되므로. 관리가 용이해짐.

> 자식 클래스의 멤버 갯수는 부모 클래스보다 많거나 같다.

단, 자식 클래스에는 부모 클래스의 필드와 메소드만이 상속되며, 생성자와 초기화 블록은 상속되지 않음. 또한, 부모 클래스의 접근 제어가 private이나 default로 설정된 멤버는 자식 클래스에서 상속받지만 접근할 수는 없다. (역은 성립 x)

---

<br>

### IS-A 관계

자식 클래스는 부모 클래스를 상속했기 때문에 일종의 부모 클래스의 하위개념임.

```java
class Mammal {
    ...
}

class Tiger extends Mammal {
    ...
}
```

예를 들어 부모 클래스인 `Mammal`과 이를 상속한 `Tiger`이 있다면, "Tiger은 Mammal이다."라고 말할 수 있다. 이를 **IS-A** 관계라고 하며, 자식 클래스 타입의 인스턴스의 참조 변수를 부모 클래스로 설정 가능하다.

```java
Mammmal t = new Tiger();
```

그러나 역으로 "Mammal은 Tiger이다."라는 문장은 성립이 불가능하다. 부모 클래스는 여러 자식 클래스를 둘 수 있기 때문. 따라서 `Tiger t = new Mammal();` 과 같은 코드는 작성할 수 없다.
또한, 참조 변수의 데이터타입을 부모 클래스로 선언할 경우, 자식 클래스에만 존재하는 멤버는 사용할 수 없다.

---

<br>

### 단일 상속

C++과 같은 타 객체지향언어에서는 다중 상속을 지원한다. 이는 한 클래스가 여러 부모 클래스를 둘 수 있다는 의미이다. 그러나 자바의 경우 자식 클래스는 하나의 부모만을 가질 수 있다. 이는 `Mammal`의 경우 `Tiger`말고도 `Cat`과 같은 다른 자식 클래스를 만들 수 있지만, `Tiger`는 오직 `Mammal`만을 상속받는다는 의미이다.

만약 다중 상속을 지원할 경우 복합적인 기능을 가진 클래스를 사용 가능하다는 장점을 가지게 되지만, 만약 상속하는 부모 클래스간에 중복된 이름의 메서드가 존재할 경우 복잡해진다. **따라서 자바는 클래스 간의 관계를 명확하게 하고 코드의 신뢰성을 높이기 위해 단일상속만을 지원한다.**

---

<br>

### 포함관계 (HAS-A)

상속 이외에 클래스를 재사용할 수 있는 방법이 있는데 이를 **포함(Composite)**라고 한다. 포함은 상속과 달리 한 클래스에서 멤버 변수를 다른 클래스의 인스턴스로 사용하는 것을 의미한다.

```java
class Tiger {
    int feet;
    Tail tail = new Tail();
}

class Tail {
    int length;
}
```

이처럼 포함을 통해 커다란 클래스 내부에 여러 클래스를 멤버로 활용하면 간결하고 재사용성이 높은 코드를 작성 가능하다.

<br>

#### 상속과 포함의 구분

물론 상속과 포함은 코드를 재사용한다는 점에서 동일해 언제 어떤 것을 사용할 지 혼동될 수도 있음.

이때 상속은 is-a, 포함은 has-a로 구분하면 된다. 즉, 클래스 간의 관계가 "~은~이다"로 해석이 되는 지, "~은 ~을 가지고 있다"로 해석되는 지의 여부를 판단하는 것이다.

앞서 작성한 `Tail`클래스의 경우 "Tail은 Tiger이다." 라고 해석하면 이상하지만, "Tiger은 Tail을 가지고 있다"라고 해석하면 자연스럽다. 반대로 "Mammal은 Tiger 가지고 있다"라고 해석하면 이상하지만, "Tiger은 Mammal이다"의 해석은 자연스럽다.

이처럼 상황에 따라 코드를 재사용할 때 상속관계 혹은 포함관계로 지정할 것인지를 적절하게 판단하는 것이, 효율적인 코드 작성을 돕는다.
